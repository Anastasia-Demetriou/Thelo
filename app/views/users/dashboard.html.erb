<meta name="viewport" content="width=device-width, initial-scale=1">

<div class="sidenav">

  <div class= "dash-logo">
    <%= link_to root_path, class: "logo" do %>
    <i class="far fa-lemon"></i> THELO
    <% end %>
  </div>

  <div class= "avatar-dashboard sidenava">
    <%= image_tag "http://kitt.lewagon.com/placeholder/users/ssaunier", class: "avatar-dash" %>
    <%= current_user.first_name.capitalize %> <%= current_user.last_name.capitalize %>
  </div>

  <div class= "menu-dash sidenava">

    <p>Professional</p>
    <%= link_to "Events I'm working at", "#proevents" %>
    <%= link_to "Bids I've placed", "#probids" %>
    <%= link_to "View Profile", edit_user_registration_path%>

    <p>Host</p>
    <%= link_to "Events I'm hosting", "#hostevents" %>
    <%= link_to "Create a new event", new_event_path%>

    <p>Account</p>
    <%= link_to "Log out", destroy_user_session_path %>
  </div>
</div>

<body class= "dashboard-container body-dash">


  <!-- PROFESSIONAL EVENTS/Bookings display the booked/confirmed events that the professional has bid on -->
  <div class="professional-events-card">
    <div class="professional-events " id="proevents">
      <p>Your Professional Events</p>
    </div>


  <!--   <div class="row status-header" >
      <div class="col-xs-12 col-md-6" style="text-align: center; background-color:none;"><p>Upcoming Booked Events</p> </div>
      <div class="col-xs-12 col-md-6 " style="text-align: center; background-color:none;"> <p>Past Booked Events</p> </div>
    </div>
 -->


    <!-- (future events) -->
    <div class="events-flex">
      <!-- <div class="col-xs-12 col-sm-12" > -->


       <div class="events-flex-item" style="background-color:none;">
        <div class="status-header" style="text-align: center; background-color:none;"><p>Upcoming Booked Events</p> </div>
        <% @accepted_bids.each do |bid| %>
        <% if bid.event.date.past? == false%>
        <!-- <div class="row"> -->
          <a href="/events/<%= bid.event.id %>" class="bid-card-link">
            <div class="bid-status-card future">
                <p><%= bid.event.name %></p>
                <% bid.user_id %>
                <p>Accepted Quote: £<%= bid.quote.to_i %></p>
                <h5><%= bid.event.date.strftime("%b %e, %l:%M %p") %></h5>
                <p>Service: <%= bid.event.service.name %></p>
                <p>Location: <%= bid.event.location %></p>
                <% if bid.status == "accepted" %>
                <% elsif bid.status == "pending" %>
                <% elsif bid.status == "declined" %>
              <% end %>
            </div>
          </a>
        <% end %>
        <% end %>
        </div>



      <!-- (past events) -->


      <div class="events-flex-item past" style="background-color:none;">
      <div class="status-header " style="text-align: center; background-color:none;"> <p>Past Booked Events</p> </div>

        <% @accepted_bids.each do |bid| %>
        <% if bid.event.date.past? == true%>
        <!-- <div class="row"> -->
          <a href="/events/<%= bid.event.id %>" class="bid-card-link">
            <div class="bid-status-card past">

                <p><%= bid.event.name %></p>
                <% bid.user_id %>
                <p>Accepted Quote: £<%= bid.quote.to_i %></p>
                <h5><%= bid.event.date.strftime("%b %e, %l:%M %p") %></h5>
                <p>Service: <%= bid.event.service.name %></p>
                <p>Location: <%= bid.event.location %></p>

                <% if bid.status == "accepted" %>
                <% elsif bid.status == "pending" %>
                <% elsif bid.status == "declined" %>

              <% end %>
            </div>
            <!-- </div> -->
          </a>
          <% end %>
          <% end %>
      </div>


      </div>
    </div>
</div>


  <!-- HOST EVENTS - display list of events created -->

  <!-- BOOKINGS need to add a green border around the events that have been confirmed with bids -->



  <div class="main" >
    <div class="professional-events" id="hostevents">
      <p>Events you are Hosting</p>
    </div>
    <div class="event-container">
      <div class="row">
        <div class="col-xs-12 col-md-8 offset-md-2">
          <div class="row">
            <% @host_events.order(date: :asc).each do |event| %>
            <div class="col-xs-12">
              <a href="/events/<%= event.id %>">
                <div class="event-card">
                  <div class="card-top">
                    <p><%= event.date.strftime("%b %e, %l:%M %p") %></p>
                    <p><%= event.bids.count %> bids made</p>
                  </div>
                  <h2><%= event.name %></h2>
                  <%= event.user_id%>

                  <div class="card-bottom">
                    <div class="card-btm">
                      <p>What they are looking for </p>
                      <div class ="card-btn card-btn-green"><%= event.service.name %></div>
                    </div>
                    <div class="card-btm">
                      <p>Budget</p>
                      <div class="card-btn card-btn-red">
                        £<%= event.min_price %>-<%= event.max_price %>
                      </div>
                      <div class="card-btm">
                      </div>
                    </div>
                  </div>
                </div>
              </a>
            </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- PROFESSIONAL BIDS - -->

<div class="professional-events-card">
  <div class="professional-events" id="probids">
    <p>Bids you have placed as a Professional</p>
  </div>

<div class="events-flex">

  <div class="bids-flex-item accepted" style="background-color:none;">
  <div class=""><p>Accepted</p> </div>
    <% @accepted_bids.each do |bid| %>
      <a href="/events/<%= bid.event.id %>" class="bid-card-link">
        <div class="bid-status-card accepted">

            <p><%= bid.event.name %></p>
            <%= bid.user_id %>
            <p>Your Offer: £<%= bid.quote.to_i %></p>
            <p>Event date: <%= bid.event.date.strftime("%b %e, %l:%M %p") %></p>
            <p>Event location:<%= bid.event.location %></p>
            <% if bid.status == "accepted" %>
            <% elsif bid.status == "pending" %>
            <% elsif bid.status == "declined" %>

          <% end %>
        </div>
      </a>
    <% end %>
  </div>



  <div class="bids-flex-item pending" style="background-color:none;">
    <div class=""> <p>Pending</p> </div>
    <% @pending_bids.each do |bid| %>
      <a href="/events/<%= bid.event.id %>" class="bid-card-link">
        <div class="bid-status-card pending">
            <p><%= bid.event.name %></p>
            <%= bid.user_id %>
            <p>Your Offer: £<%= bid.quote.to_i %></p>
            <p>Price Range: £<%= bid.event.min_price %>-<%= bid.event.max_price %></p>
            <p>Date: <%= bid.event.date.strftime("%b %e, %l:%M %p") %></p>
            <p>Location:<%= bid.event.location %></p>
            <% if bid.status == "accepted" %>
            <% elsif bid.status == "pending" %>
            <% elsif bid.status == "declined" %>
          <% end %>
        </div>
      </a>
    <% end %>
  </div>

  <div class="bids-flex-item pending" style="background-color:none;">
     <div class=""><p>Declined</p> </div>
    <% @declined_bids.each do |bid| %>
    <a href="/events/<%= bid.event.id %>" class="bid-card-link">
      <div class="bid-status-card declined">
          <p><%= bid.event.name %></p>
          <%= bid.user_id %>
          <p>Your Offer: £<%= bid.quote.to_i %></p>
          <p>Price Range: £<%= bid.event.min_price %>-<%= bid.event.max_price %></p>
          <p>Date: <%= bid.event.date.strftime("%b %e, %l:%M %p") %></p>
          <p>Location:<%= bid.event.location %></p>
          <% if bid.status == "accepted" %>
          <% elsif bid.status == "pending" %>
          <% elsif bid.status == "declined" %>
        <% end %>
      </div>
    </a>
  <% end %>
  </div>

</div>
</div>
<!-- CREATE NEW EVENT  -->



</body>

